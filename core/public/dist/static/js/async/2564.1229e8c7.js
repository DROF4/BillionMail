"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2564"],{93953:function(e,t,a){a.d(t,{Z:()=>f});var l=a(65083),s=a(58786),n=a(56946),o=a(54470),i=a(51048),u=a(71309),r=a(60951),p=a(6445),c=a(73238);let g={name:"Flex",self:function(){return c.Z}},d=Object.assign(Object.assign({},n.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,s.aZ)({name:"Flex",props:d,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,o.ZP)(e),r=(0,n.Z)("Flex","-flex",void 0,g,e,t);return{rtlEnabled:(0,i.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,s.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,u.Tl)("gap",t)]:a}}=r.value,{row:s,col:n}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(n),vertical:(0,l.fQ)(s)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:n,margin:o,wrap:i,mergedClsPrefix:u,rtlEnabled:c}=this,g=(0,r.x)((0,p.z)(this),!1);return g.length?(0,s.h)("div",{role:"none",class:[`${u}-flex`,c&&`${u}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:n,flexWrap:!i||e?"nowrap":"wrap",alignItems:a,gap:`${o.vertical}px ${o.horizontal}px`}},g):null}})},84075:function(e,t,a){a.d(t,{WH:()=>o,Z2:()=>c,gV:()=>f,hI:()=>n,iE:()=>p,mD:()=>r,sS:()=>u,uz:()=>d,yG:()=>g,yL:()=>i});var l=a(34541);let{t:s}=a(76882).ag.global,n=e=>l.e.get("/contact/group/list",{params:e}),o=()=>l.e.get("/contact/group/all"),i=e=>l.e.get("/contact/group/info",{params:e}),u=e=>l.e.post("/contact/group/create",e,{fetchOptions:{loading:s("contacts.group.loading.createGroup"),successMessage:!0}}),r=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.updateGroup"),successMessage:!0}}),p=e=>l.e.post("/contact/group/delete",e,{fetchOptions:{loading:s("contacts.group.loading.deleteGroup"),successMessage:!0}}),c=e=>l.e.post("/contact/group/tag_contact_count",e),g=e=>l.e.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:s("contacts.group.loading.exportGroup"),successMessage:!0}}),d=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}}),f=e=>l.e.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}})},80947:function(e,t,a){a.d(t,{N:()=>o});var l=a(22895),s=a(68271),n=a(58786);let o=e=>{let{params:t,fetchFn:a,useParams:o,loading:i=!0,immediate:u=!0,rowKey:r=e=>e.id}=e,p=(0,n.iH)(i),c=(0,n.iH)([]),g=(0,n.iH)(0),d=(0,n.iH)(t),f=(0,n.iH)([]),v=()=>o?o(d.value):d.value,m=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(d.value.page=1),p.value=!0;try{let e=v(),t=await a(e);(0,s.Kn)(t)&&(c.value=(0,s.kJ)(t.list)?t.list:[],g.value=(0,s.hj)(t.total)?t.total:0)}finally{f.value=[],p.value=!1}},300),h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(e)},w=e=>{d.value.page=e},_=e=>{d.value.page_size=e};return(0,n.bv)(()=>{u&&h()}),{tableData:c,tableTotal:g,tableKeys:f,tableParams:d,fetchTable:h,resetTable:()=>h(!0),tableProps:(0,n.Fl)(()=>({rowKey:r,data:c.value,loading:p.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),batchProps:(0,n.Fl)(()=>({rowKey:r,data:c.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),pageProps:(0,n.Fl)(()=>({page:d.value.page,pageSize:d.value.page_size,itemCount:g.value,onUpdatePage:w,onUpdatePageSize:_}))}}},43458:function(e,t,a){a.d(t,{CZ:()=>o,Lp:()=>r,Pn:()=>u,Rc:()=>p,kV:()=>n,ln:()=>i});var l=a(34541);let{t:s}=a(76882).ag.global,n=e=>l.e.get("/tags/list",{params:e}),o=e=>l.e.get("/tags/all",{params:e}),i=e=>l.e.post("/tags/create",e,{fetchOptions:{loading:s("contacts.tags.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/tags/delete",e,{fetchOptions:{loading:s("contacts.tags.loading.deleting"),successMessage:!0}}),r=e=>l.e.post("/tags/update",e,{fetchOptions:{loading:s("contacts.tags.loading.updating"),successMessage:!0}}),p=e=>l.e.post("/tags/batch_contacts",e,{fetchOptions:{loading:s("contacts.tags.loading.bulkSetting"),successMessage:!0}})},86559:function(e,t,a){a.d(t,{Z:()=>n});var l=a(73084),s=a(58786);let n=(0,s.aZ)({__name:"index",props:(0,s.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,s.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,s.iH)(null),i=(0,s.tT)(e,"value"),u=()=>{n("search",i.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,s.wg)(),(0,s.j4)(a,(0,s.dG)({ref_key:"inputRef",ref:o,value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,s.D2)(u,["enter"])}),(0,s.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,s.w5)(()=>[(0,s._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[1]||(t[1]=[(0,s._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,s.w5)(()=>[(0,s._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[2]||(t[2]=[(0,s._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},66760:function(e,t,a){a.d(t,{Z:()=>i});var l=a(81021),s=a(15496),n=a(58786);let o={class:"leading-22px text-13px text-desc text-center"},i=(0,n.aZ)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,i)=>{let u=s.ZP,r=(0,n.up)("i18n-t"),p=l.Z;return(0,n.wg)(),(0,n.j4)(p,null,{default:(0,n.w5)(()=>[(0,n._)("div",o,[(0,n.Wm)(r,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,n.w5)(()=>[(0,n.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,n.w5)(()=>i[0]||(i[0]=[(0,n._)("span",null,"Issues",-1),(0,n._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,n.w5)(()=>[(0,n.Wm)(u,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,n.w5)(()=>i[1]||(i[1]=[(0,n.Uk)(" Star "),(0,n._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),i[2]||(i[2]=(0,n._)("br",null,null,-1)),(0,n._)("span",null,(0,n.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},39244:function(e,t,a){a.d(t,{Z:()=>n});var l=a(93953),s=a(58786);let n=(0,s.aZ)({__name:"index",setup(e){let t=!!(0,s.Rr)().toolsLeft,a=!!(0,s.Rr)().toolsRight,n=!!(0,s.Rr)().pageLeft||!!(0,s.Rr)().pageRight;return(e,o)=>{let i=l.Z;return(0,s.wg)(),(0,s.iD)("div",null,[t||a?((0,s.wg)(),(0,s.j4)(i,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s.Wm)(i,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsLeft")]),_:3}),(0,s.Wm)(i,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"table"),(0,s.SU)(n)?((0,s.wg)(),(0,s.j4)(i,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s._)("div",null,[(0,s.WI)(e.$slots,"pageLeft")]),(0,s.Wm)(i,null,{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"modal")])}}})},25170:function(e,t,a){a.d(t,{Z:()=>i});var l=a(75459),s=a(58786),n=a(68271);let o={class:"ml-8px text-14px"},i=(0,s.aZ)({__name:"index",props:(0,s.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,i=(0,s.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),u=(0,s.tT)(e,"page"),r=(0,s.tT)(e,"pageSize"),p=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},c=t=>{var l;u.value=1,null==(l=e.onUpdatePage)||l.call(e,1),g(t),a("refresh")},g=e=>{i.value&&(0,n.qQ)(i.value,String(e))};if(i.value){let e=(0,n.$o)(i.value);e&&(r.value=(0,n.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,s.wg)(),(0,s.j4)(a,(0,s.dG)(e.$attrs,{page:u.value,"onUpdate:page":[t[0]||(t[0]=e=>u.value=e),p],"page-size":r.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>r.value=e),c],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.w5)(e=>{let{itemCount:t}=e;return[(0,s._)("span",o," Total "+(0,s.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},69311:function(e,t,a){a.d(t,{Z:()=>u});var l=a(8490),s=a(58786),n=a(68271),o=a(84075),i=a(52495);let u=(0,s.aZ)({__name:"GroupSelect",props:(0,s.Vf)({all:{type:Boolean,default:!1}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){let t=(0,s.tT)(e,"value"),{t:a}=(0,i.QT)(),u=(0,s.iH)([]),r=(0,s.iH)(!1);return(async()=>{try{r.value=!0;let l=await (0,o.WH)();(0,n.Kn)(l)&&(u.value=l.list.map(e=>({label:e.name,value:e.id})),(null===t.value||void 0===t.value)&&l.list.length>0&&(t.value=l.list[0].id),e.all&&u.value.unshift({label:a("common.all.text"),value:0}))}finally{r.value=!1}})(),(e,a)=>{let n=l.Z;return(0,s.wg)(),(0,s.j4)(n,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),loading:(0,s.SU)(r),options:(0,s.SU)(u)},null,8,["value","loading","options"])}}})},12112:function(e,t,a){a.d(t,{Z:()=>c});var l=a(46244),s=a(6455),n=a(73084),o=a(58786),i=a(51169),u=a(43458),r=a(69311),p=a(52495);let c=(0,o.aZ)({__name:"TagForm",setup(e){let{t}=(0,p.QT)(),a=(0,o.iH)(!1),c=(0,o.Fl)(()=>a.value?t("contacts.tags.form.title.edit"):t("contacts.tags.form.title.create")),g=(0,o.AE)("formRef"),d=(0,o.iH)(0),f=(0,o.qj)({name:"",group_id:null}),v=(0,o.Fl)(()=>({name:{required:!0,trigger:["blur","input"],validator:()=>!!f.name||Error(t("contacts.tags.form.validation.nameRequired"))},group_id:{required:!0,trigger:["change"],validator:()=>!!f.group_id||Error(t("contacts.tags.form.validation.groupRequired"))}})),m=()=>{d.value=0,f.name="",f.group_id=null},[h,w]=(0,i.d)({onChangeState:e=>{if(e){let e=w.getState();a.value=e.isEdit,e.isEdit&&e.row?(d.value=e.row.id,f.name=e.row.name,f.group_id=e.row.group_id):f.group_id=e.groupId||null}else m()},onConfirm:async()=>{var e;await (null==(e=g.value)?void 0:e.validate()),a.value?await (0,u.Lp)({id:d.value,name:f.name}):await (0,u.ln)({name:f.name,group_id:f.group_id?f.group_id:0});let{refresh:t}=w.getState();t()}});return(e,i)=>{let u=n.Z,p=s.ZP,d=l.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(h),{title:(0,o.SU)(c),width:440},{default:(0,o.w5)(()=>[(0,o.Wm)(d,{ref_key:"formRef",ref:g,class:"pt-16px",model:(0,o.SU)(f),rules:(0,o.SU)(v)},{default:(0,o.w5)(()=>[(0,o.Wm)(p,{label:(0,o.SU)(t)("contacts.tags.form.fields.name"),path:"name"},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{value:(0,o.SU)(f).name,"onUpdate:value":i[0]||(i[0]=e=>(0,o.SU)(f).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("contacts.tags.form.fields.group"),path:"group_id"},{default:(0,o.w5)(()=>[(0,o.Wm)(r.Z,{value:(0,o.SU)(f).group_id,"onUpdate:value":i[1]||(i[1]=e=>(0,o.SU)(f).group_id=e),disabled:(0,o.SU)(a)},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title"])}}})}}]);