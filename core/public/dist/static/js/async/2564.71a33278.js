"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2564"],{84075:function(e,t,a){a.d(t,{WH:()=>i,Z2:()=>c,gV:()=>v,hI:()=>o,iE:()=>p,mD:()=>r,sS:()=>n,uz:()=>d,yG:()=>g,yL:()=>u});var l=a(34541);let{t:s}=a(76882).ag.global,o=e=>l.e.get("/contact/group/list",{params:e}),i=()=>l.e.get("/contact/group/all"),u=e=>l.e.get("/contact/group/info",{params:e}),n=e=>l.e.post("/contact/group/create",e,{fetchOptions:{loading:s("contacts.group.loading.createGroup"),successMessage:!0}}),r=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.updateGroup"),successMessage:!0}}),p=e=>l.e.post("/contact/group/delete",e,{fetchOptions:{loading:s("contacts.group.loading.deleteGroup"),successMessage:!0}}),c=e=>l.e.post("/contact/group/tag_contact_count",e),g=e=>l.e.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:s("contacts.group.loading.exportGroup"),successMessage:!0}}),d=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}}),v=e=>l.e.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:s("contacts.group.loading.saveSettings"),successMessage:!0}})},80947:function(e,t,a){a.d(t,{N:()=>i});var l=a(22895),s=a(68271),o=a(58786);let i=e=>{let{params:t,fetchFn:a,useParams:i,loading:u=!0,immediate:n=!0,rowKey:r=e=>e.id}=e,p=(0,o.iH)(u),c=(0,o.iH)([]),g=(0,o.iH)(0),d=(0,o.iH)(t),v=(0,o.iH)([]),f=()=>i?i(d.value):d.value,m=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(d.value.page=1),p.value=!0;try{let e=f(),t=await a(e);(0,s.Kn)(t)&&(c.value=(0,s.kJ)(t.list)?t.list:[],g.value=(0,s.hj)(t.total)?t.total:0)}finally{v.value=[],p.value=!1}},300),w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(e)},_=e=>{d.value.page=e},h=e=>{d.value.page_size=e};return(0,o.bv)(()=>{n&&w()}),{tableData:c,tableTotal:g,tableKeys:v,tableParams:d,fetchTable:w,resetTable:()=>w(!0),tableProps:(0,o.Fl)(()=>({rowKey:r,data:c.value,loading:p.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,o.Fl)(()=>({rowKey:r,data:c.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,o.Fl)(()=>({page:d.value.page,pageSize:d.value.page_size,itemCount:g.value,onUpdatePage:_,onUpdatePageSize:h}))}}},43458:function(e,t,a){a.d(t,{CZ:()=>i,Lp:()=>r,Pn:()=>n,Rc:()=>p,kV:()=>o,ln:()=>u});var l=a(34541);let{t:s}=a(76882).ag.global,o=e=>l.e.get("/tags/list",{params:e}),i=e=>l.e.get("/tags/all",{params:e}),u=e=>l.e.post("/tags/create",e,{fetchOptions:{loading:s("contacts.tags.loading.creating"),successMessage:!0}}),n=e=>l.e.post("/tags/delete",e,{fetchOptions:{loading:s("contacts.tags.loading.deleting"),successMessage:!0}}),r=e=>l.e.post("/tags/update",e,{fetchOptions:{loading:s("contacts.tags.loading.updating"),successMessage:!0}}),p=e=>l.e.post("/tags/batch_contacts",e,{fetchOptions:{loading:s("contacts.tags.loading.bulkSetting"),successMessage:!0}})},86559:function(e,t,a){a.d(t,{Z:()=>o});var l=a(73084),s=a(58786);let o=(0,s.aZ)({__name:"index",props:(0,s.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,s.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,i=(0,s.iH)(null),u=(0,s.tT)(e,"value"),n=()=>{o("search",u.value)};return a({focus:()=>{var e;null==(e=i.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,s.wg)(),(0,s.j4)(a,(0,s.dG)({ref_key:"inputRef",ref:i,value:u.value,"onUpdate:value":t[0]||(t[0]=e=>u.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,s.D2)(n,["enter"])}),(0,s.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,s.w5)(()=>[(0,s._)("div",{class:"flex items-center cursor-pointer",onClick:n},t[1]||(t[1]=[(0,s._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,s.w5)(()=>[(0,s._)("div",{class:"flex items-center cursor-pointer",onClick:n},t[2]||(t[2]=[(0,s._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},66760:function(e,t,a){a.d(t,{Z:()=>u});var l=a(81021),s=a(15496),o=a(58786);let i={class:"leading-22px text-13px text-desc text-center"},u=(0,o.aZ)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,u)=>{let n=s.ZP,r=(0,o.up)("i18n-t"),p=l.Z;return(0,o.wg)(),(0,o.j4)(p,null,{default:(0,o.w5)(()=>[(0,o._)("div",i,[(0,o.Wm)(r,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.w5)(()=>[(0,o.Wm)(n,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,o.w5)(()=>u[0]||(u[0]=[(0,o._)("span",null,"Issues",-1),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,o.w5)(()=>[(0,o.Wm)(n,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.w5)(()=>u[1]||(u[1]=[(0,o.Uk)(" Star "),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),u[2]||(u[2]=(0,o._)("br",null,null,-1)),(0,o._)("span",null,(0,o.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},39244:function(e,t,a){a.d(t,{Z:()=>o});var l=a(93953),s=a(58786);let o=(0,s.aZ)({__name:"index",setup(e){let t=!!(0,s.Rr)().toolsLeft,a=!!(0,s.Rr)().toolsRight,o=!!(0,s.Rr)().pageLeft||!!(0,s.Rr)().pageRight;return(e,i)=>{let u=l.Z;return(0,s.wg)(),(0,s.iD)("div",null,[t||a?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s.Wm)(u,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsLeft")]),_:3}),(0,s.Wm)(u,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"table"),(0,s.SU)(o)?((0,s.wg)(),(0,s.j4)(u,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s._)("div",null,[(0,s.WI)(e.$slots,"pageLeft")]),(0,s.Wm)(u,null,{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"modal")])}}})},25170:function(e,t,a){a.d(t,{Z:()=>u});var l=a(75459),s=a(58786),o=a(68271);let i={class:"ml-8px text-14px"},u=(0,s.aZ)({__name:"index",props:(0,s.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,u=(0,s.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),n=(0,s.tT)(e,"page"),r=(0,s.tT)(e,"pageSize"),p=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},c=t=>{var l;n.value=1,null==(l=e.onUpdatePage)||l.call(e,1),g(t),a("refresh")},g=e=>{u.value&&(0,o.qQ)(u.value,String(e))};if(u.value){let e=(0,o.$o)(u.value);e&&(r.value=(0,o.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,s.wg)(),(0,s.j4)(a,(0,s.dG)(e.$attrs,{page:n.value,"onUpdate:page":[t[0]||(t[0]=e=>n.value=e),p],"page-size":r.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>r.value=e),c],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.w5)(e=>{let{itemCount:t}=e;return[(0,s._)("span",i," Total "+(0,s.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},69311:function(e,t,a){a.d(t,{Z:()=>n});var l=a(8490),s=a(58786),o=a(68271),i=a(84075),u=a(52495);let n=(0,s.aZ)({__name:"GroupSelect",props:(0,s.Vf)({all:{type:Boolean,default:!1}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){let t=(0,s.tT)(e,"value"),{t:a}=(0,u.QT)(),n=(0,s.iH)([]),r=(0,s.iH)(!1);return(async()=>{try{r.value=!0;let l=await (0,i.WH)();(0,o.Kn)(l)&&(n.value=l.list.map(e=>({label:e.name,value:e.id})),(null===t.value||void 0===t.value)&&l.list.length>0&&(t.value=l.list[0].id),e.all&&n.value.unshift({label:a("common.all.text"),value:0}))}finally{r.value=!1}})(),(e,a)=>{let o=l.Z;return(0,s.wg)(),(0,s.j4)(o,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),loading:(0,s.SU)(r),options:(0,s.SU)(n)},null,8,["value","loading","options"])}}})},12112:function(e,t,a){a.d(t,{Z:()=>c});var l=a(46244),s=a(6455),o=a(73084),i=a(58786),u=a(51169),n=a(43458),r=a(69311),p=a(52495);let c=(0,i.aZ)({__name:"TagForm",setup(e){let{t}=(0,p.QT)(),a=(0,i.iH)(!1),c=(0,i.Fl)(()=>a.value?t("contacts.tags.form.title.edit"):t("contacts.tags.form.title.create")),g=(0,i.AE)("formRef"),d=(0,i.iH)(0),v=(0,i.qj)({name:"",group_id:null}),f=(0,i.Fl)(()=>({name:{required:!0,trigger:["blur","input"],validator:()=>!!v.name||Error(t("contacts.tags.form.validation.nameRequired"))},group_id:{required:!0,trigger:["change"],validator:()=>!!v.group_id||Error(t("contacts.tags.form.validation.groupRequired"))}})),m=()=>{d.value=0,v.name="",v.group_id=null},[w,_]=(0,u.d)({onChangeState:e=>{if(e){let e=_.getState();a.value=e.isEdit,e.isEdit&&e.row?(d.value=e.row.id,v.name=e.row.name,v.group_id=e.row.group_id):v.group_id=e.groupId||null}else m()},onConfirm:async()=>{var e;await (null==(e=g.value)?void 0:e.validate()),a.value?await (0,n.Lp)({id:d.value,name:v.name}):await (0,n.ln)({name:v.name,group_id:v.group_id?v.group_id:0});let{refresh:t}=_.getState();t()}});return(e,u)=>{let n=o.Z,p=s.ZP,d=l.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(w),{title:(0,i.SU)(c),width:440},{default:(0,i.w5)(()=>[(0,i.Wm)(d,{ref_key:"formRef",ref:g,class:"pt-16px",model:(0,i.SU)(v),rules:(0,i.SU)(f)},{default:(0,i.w5)(()=>[(0,i.Wm)(p,{label:(0,i.SU)(t)("contacts.tags.form.fields.name"),path:"name"},{default:(0,i.w5)(()=>[(0,i.Wm)(n,{value:(0,i.SU)(v).name,"onUpdate:value":u[0]||(u[0]=e=>(0,i.SU)(v).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(p,{label:(0,i.SU)(t)("contacts.tags.form.fields.group"),path:"group_id"},{default:(0,i.w5)(()=>[(0,i.Wm)(r.Z,{value:(0,i.SU)(v).group_id,"onUpdate:value":u[1]||(u[1]=e=>(0,i.SU)(v).group_id=e),disabled:(0,i.SU)(a)},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title"])}}})}}]);