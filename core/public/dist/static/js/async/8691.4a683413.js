"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8691"],{82822:function(e,t,a){a.d(t,{Z:()=>l});var n=a(21452),o=a(32398);let l=function(e){return"number"==typeof e||(0,o.Z)(e)&&"[object Number]"==(0,n.Z)(e)}},93953:function(e,t,a){a.d(t,{Z:()=>f});var n=a(65083),o=a(58786),l=a(56946),r=a(54470),i=a(51048),s=a(71309),c=a(60951),u=a(6445),p=a(73238);let d={name:"Flex",self:function(){return p.Z}},m=Object.assign(Object.assign({},l.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,o.aZ)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,r.ZP)(e),c=(0,l.Z)("Flex","-flex",void 0,d,e,t);return{rtlEnabled:(0,i.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,o.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,s.Tl)("gap",t)]:a}}=c.value,{row:o,col:l}=(0,n.yU)(a);return{horizontal:(0,n.fQ)(l),vertical:(0,n.fQ)(o)}})}},render(){let{vertical:e,reverse:t,align:a,inline:n,justify:l,margin:r,wrap:i,mergedClsPrefix:s,rtlEnabled:p}=this,d=(0,c.x)((0,u.z)(this),!1);return d.length?(0,o.h)("div",{role:"none",class:[`${s}-flex`,p&&`${s}-flex--rtl`],style:{display:n?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:l,flexWrap:!i||e?"nowrap":"wrap",alignItems:a,gap:`${r.vertical}px ${r.horizontal}px`}},d):null}})},84075:function(e,t,a){a.d(t,{WH:()=>r,Z2:()=>p,gV:()=>f,hI:()=>l,iE:()=>u,mD:()=>c,sS:()=>s,uz:()=>m,yG:()=>d,yL:()=>i});var n=a(34541);let{t:o}=a(76882).ag.global,l=e=>n.e.get("/contact/group/list",{params:e}),r=()=>n.e.get("/contact/group/all"),i=e=>n.e.get("/contact/group/info",{params:e}),s=e=>n.e.post("/contact/group/create",e,{fetchOptions:{loading:o("contacts.group.loading.createGroup"),successMessage:!0}}),c=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.updateGroup"),successMessage:!0}}),u=e=>n.e.post("/contact/group/delete",e,{fetchOptions:{loading:o("contacts.group.loading.deleteGroup"),successMessage:!0}}),p=e=>n.e.post("/contact/group/tag_contact_count",e),d=e=>n.e.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:o("contacts.group.loading.exportGroup"),successMessage:!0}}),m=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.saveSettings"),successMessage:!0}}),f=e=>n.e.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:o("contacts.group.loading.saveSettings"),successMessage:!0}})},86559:function(e,t,a){a.d(t,{Z:()=>l});var n=a(73084),o=a(58786);let l=(0,o.aZ)({__name:"index",props:(0,o.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,o.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:l}=t,r=(0,o.iH)(null),i=(0,o.tT)(e,"value"),s=()=>{l("search",i.value)};return a({focus:()=>{var e;null==(e=r.value)||e.focus()}}),(e,t)=>{let a=n.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)({ref_key:"inputRef",ref:r,value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,o.D2)(s,["enter"])}),(0,o.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,o.w5)(()=>[(0,o._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[1]||(t[1]=[(0,o._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,o.w5)(()=>[(0,o._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[2]||(t[2]=[(0,o._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},66267:function(e,t,a){a.r(t),a.d(t,{default:()=>G});var n=a(39244),o=a(25170),l=a(60424),r=a(66760),i=a(86559),s=a(58786),c=a(15496),u=a(93953),p=a(51169),d=a(67512),m=a(68271),f=a(84075),g=a(46244),v=a(3179),y=a(8490),_=a(6455),h=a(73084),w=a(98003),x=a(52495);let S={class:"pt-12px"},U={class:"flex-1"},b={class:"mt-8px text-desc"},Z={class:"mr-4px"},k=`email,attributes
example1@example.com,"{""age"": ""13"", ""Gender"": ""XXX""}"
example2@example.com,"{""age"": ""45"", ""city"": ""XXX""}"
`,W=(0,s.aZ)({__name:"GroupAdd",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),n=(0,s.qj)({create_type:2,name:"",description:"",double_optin:0,file_data:"",file_type:""}),o={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},l=[{label:"Single Opt-in",value:0},{label:"Double Opt-in",value:1}],r=e=>{let t=new FileReader;t.onload=t=>{var a;n.file_type=e.name.substring(e.name.lastIndexOf(".")+1),n.file_data=null==(a=t.target)?void 0:a.result},e.file&&t.readAsText(e.file)},i=async()=>{await (0,w.Sv)({file_path:"./template/example_recipients.csv"})},[u,d]=(0,p.d)({onChangeState:e=>{e&&(n.name="")},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.sS)((0,s.IU)(n));let t=d.getState();null==t||t.refresh()}});return(e,p)=>{let d=h.Z,m=_.ZP,f=y.Z,w=v.Z,x=c.ZP,W=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(u),{title:(0,s.SU)(t)("contacts.group.add.title"),width:"540"},{default:(0,s.w5)(()=>[(0,s._)("div",S,[(0,s.Wm)(W,{ref_key:"formRef",ref:a,model:(0,s.SU)(n),rules:o},{default:(0,s.w5)(()=>[(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(d,{value:(0,s.SU)(n).name,"onUpdate:value":p[0]||(p[0]=e=>(0,s.SU)(n).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"List Type"},{default:(0,s.w5)(()=>[(0,s.Wm)(f,{value:(0,s.SU)(n).double_optin,"onUpdate:value":p[1]||(p[1]=e=>(0,s.SU)(n).double_optin=e),options:l},null,8,["value"])]),_:1}),(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.file"),path:"file_data"},{default:(0,s.w5)(()=>[(0,s._)("div",U,[(0,s.Wm)(w,{"is-upload":!1,"max-size":10,accept:["csv"],onChange:r}),(0,s._)("div",b,[(0,s._)("span",Z,(0,s.zw)((0,s.SU)(t)("contacts.group.fileUpload.hint")),1),(0,s.Wm)(x,{text:"",type:"primary",onClick:i},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.download")),1)]),_:1})])])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"Example raw CSV"},{default:(0,s.w5)(()=>[(0,s._)("pre",{class:"csv-example"},(0,s.zw)(k))]),_:1})]),_:1},8,["model"])])]),_:1},8,["title"])}}}),C=(0,a(41748).default)(W,[["__scopeId","data-v-d82248ee"]]),z={class:"pt-12px"},O=(0,s.aZ)({__name:"GroupRename",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),n=(0,s.qj)({group_id:0,name:""}),o={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},[l,r]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=r.getState();e&&(n.group_id=e.id,n.name=e.name)}else n.group_id=0,n.name=""},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.mD)((0,s.IU)(n));let t=r.getState();null==t||t.refresh()}});return(e,r)=>{let i=h.Z,c=_.ZP,u=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(l),{title:(0,s.SU)(t)("contacts.group.rename.title"),width:"400"},{default:(0,s.w5)(()=>[(0,s._)("div",z,[(0,s.Wm)(u,{ref_key:"formRef",ref:a,model:(0,s.SU)(n),rules:o},{default:(0,s.w5)(()=>[(0,s.Wm)(c,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(i,{value:(0,s.SU)(n).name,"onUpdate:value":r[0]||(r[0]=e=>(0,s.SU)(n).name=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var R=a(65965);function j(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,s.lA)(e)}let G=(0,s.aZ)({__name:"temp",setup(e){let{t}=(0,x.QT)(),a=(0,R.tv)(),g=(0,s.iH)([]),{tableParams:v,tableList:y,loading:_,tableTotal:h,getTableData:w}=(0,d.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:f.hI}),S=(0,s.iH)([{type:"selection"},{key:"name",title:t("contacts.group.columns.name"),minWidth:120,render:e=>(0,s.Wm)(c.ZP,{text:!0,type:"primary",onClick:()=>{a.push({path:"/contacts/subscribers",state:{group_id:e.id}})}},{default:()=>[e.name]})},{key:"total_count",title:t("contacts.group.columns.subscribers"),minWidth:100,render:e=>e.total_count||0},{key:"double_optin",title:t("contacts.group.columns.type"),minWidth:100,render:e=>1===e.double_optin?t("contacts.group.type.doubleOptin"):t("contacts.group.type.singleOptin")},{key:"create_time",title:t("contacts.group.columns.createdAt"),minWidth:140,render:e=>(0,m.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:180,render:e=>{let a,n,o;return(0,s.Wm)(u.Z,{inline:!0},{default:()=>[(0,s.Wm)(c.ZP,{type:"primary",text:!0,onClick:()=>{k(e)}},j(a=t("common.actions.settings"))?a:{default:()=>[a]}),(0,s.Wm)(c.ZP,{type:"primary",text:!0,onClick:()=>{G(e)}},j(n=t("common.actions.rename"))?n:{default:()=>[n]}),(0,s.Wm)(c.ZP,{type:"error",text:!0,onClick:()=>{P(e)}},j(o=t("common.actions.delete"))?o:{default:()=>[o]})]})}}]),[U,b]=(0,p.d)({component:C,state:{refresh:w}}),Z=()=>{b.open()},k=e=>{a.push(`/contacts/settings/${e.id}`)},[W,z]=(0,p.d)({component:O,state:{refresh:w}}),G=e=>{z.setState({row:e}),z.open()},P=e=>{(0,m.iG)({title:t("contacts.group.delete.title"),content:t("contacts.group.delete.confirm",{name:e.name}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,f.iE)({group_ids:[e.id]}),w()}})},T=()=>{(0,m.iG)({title:t("contacts.group.export.title"),content:t("contacts.group.export.confirm",{count:g.value.length}),onConfirm:async()=>{await (0,f.yG)({format:"csv",include_unsubscribe:!0,group_ids:g.value,export_type:1})}})};return(e,a)=>{let u=i.Z,p=r.Z,d=l.Z,m=o.Z,f=n.Z;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(f,null,{toolsLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(c.ZP),{type:"primary",onClick:Z},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t)("common.actions.add")),1)]),_:1})]),toolsRight:(0,s.w5)(()=>[(0,s.Wm)(u,{value:(0,s.SU)(v).keyword,"onUpdate:value":a[0]||(a[0]=e=>(0,s.SU)(v).keyword=e),width:280,placeholder:(0,s.SU)(t)("contacts.group.search.namePlaceholder"),onSearch:a[1]||(a[1]=()=>(0,s.SU)(w)(!0))},null,8,["value","placeholder"])]),table:(0,s.w5)(()=>[(0,s.Wm)(d,{"checked-row-keys":(0,s.SU)(g),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>(0,s.dq)(g)?g.value=e:null),"row-key":e=>e.id,loading:(0,s.SU)(_),columns:(0,s.SU)(S),data:(0,s.SU)(y)},{empty:(0,s.w5)(()=>[(0,s.Wm)(p)]),_:1},8,["checked-row-keys","row-key","loading","columns","data"])]),pageLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(c.ZP),{disabled:0===(0,s.SU)(g).length,onClick:T},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.export")),1)]),_:1},8,["disabled"])]),pageRight:(0,s.w5)(()=>[(0,s.Wm)(m,{page:(0,s.SU)(v).page,"onUpdate:page":a[3]||(a[3]=e=>(0,s.SU)(v).page=e),"page-size":(0,s.SU)(v).page_size,"onUpdate:pageSize":a[4]||(a[4]=e=>(0,s.SU)(v).page_size=e),"item-count":(0,s.SU)(h),onRefresh:(0,s.SU)(w)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(U)),(0,s.Wm)((0,s.SU)(W))]),_:1})])}}})}}]);